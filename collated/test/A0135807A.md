# A0135807A
###### \java\guitests\guihandles\GuiHandle.java
``` java
    protected String getTextAreaText(String content) {
        TextArea textArea = getNode(content);
        return textArea.getText();
    }

    protected void setTextArea(String textAreaId, String newContent) {
        guiRobot.clickOn(textAreaId);
        TextArea textArea = getNode(textAreaId);
        textArea.setText(newContent);
        guiRobot.sleep(500); //so that the texts stays visible on the GUI for a short period
    }
    //@@ author

    public void pressEnter() {
        guiRobot.push(KeyCode.ENTER).sleep(500);
    }

    protected String getTextFromLabel(String fieldId, Node parentNode) {
        return ((Label) guiRobot.from(parentNode).lookup(fieldId).tryQuery().get()).getText();
    }

    public void focusOnSelf() {
        if (stageTitle != null) {
            focusOnWindow(stageTitle);
        }
    }

    public void focusOnMainApp() {
        this.focusOnWindow(TestApp.APP_TITLE);
    }

    public void closeWindow() {
        Optional<Window> window = guiRobot.listTargetWindows()
                .stream()
                .filter(w -> w instanceof Stage && ((Stage) w).getTitle().equals(stageTitle)).findAny();

        if (!window.isPresent()) {
            return;
        }

        guiRobot.targetWindow(window.get());
        guiRobot.interact(() -> ((Stage) window.get()).close());
        focusOnMainApp();
    }
}
```
###### \java\guitests\guihandles\MainGuiHandle.java
``` java
    public TaskDescriptionHandle getTaskDescription() {
        return new TaskDescriptionHandle(guiRobot, primaryStage, TestApp.APP_TITLE);
    }
```
###### \java\guitests\OpenAndSaveCommandTest.java
``` java
/** files are automatically written to the saved location. */
public class OpenAndSaveCommandTest extends AddressBookGuiTest {
    public static final String FILE_DIR = "src/test/data/sandbox/";
    public static final String FILE_NAME = "src/test/data/sandbox/taskmanager";
    public static final String FILE_ALTERNATE_NAME = "src/test/data/sandbox/myPotato";
    public static final String FILE_XML_EXTENSION = ".xml";
    public static final String INVALID_FILE = "data/?*&^";

    public static final String COMMAND_SAVE = "save ";
    public static final String COMMAND_OPEN = "open ";
    public static final String COMMAND_DELETE = "delete ";
    public static final String EMPTY = "";

    public final int index = 1;
    public TestTask[] testTask = td.getTypicalTasks();

    /** Test for Valid and Invalid fileNames */
    @Test
    public void isValidFile() {
        assertTrue(SaveCommand.isValidFile(new File(FILE_DIR)));
        assertTrue(SaveCommand.isValidFile(new File(FILE_NAME + FILE_XML_EXTENSION)));

        assertFalse(SaveCommand.isValidFile(new File(INVALID_FILE)));
    }

    /** Open and save files functionality. */
    @Test
    public void saveAndOpenFile() {
        // Default filename :taskmanager.xml
        assertSaveResult(COMMAND_SAVE + FILE_DIR, FILE_NAME);
        assertOpenResult(COMMAND_OPEN + FILE_DIR, testTask); // FileDirectory
        assertSaveResult(COMMAND_SAVE + FILE_NAME, FILE_NAME); // without .xml
        assertOpenResult(COMMAND_OPEN + FILE_NAME, testTask); // without .xml
        assertSaveResult(COMMAND_SAVE + FILE_NAME + FILE_XML_EXTENSION, FILE_NAME); // with .xml
        assertOpenResult(COMMAND_OPEN + FILE_NAME + FILE_XML_EXTENSION, testTask); // with .xml
        assertSaveResult(COMMAND_SAVE + FILE_ALTERNATE_NAME, FILE_ALTERNATE_NAME);
        // Ensure successful save, to be used for test cases
    }

    /**
     * Save file, Delete and Open file to retrieve the saved data. Alternate
     * file is required as data will be automatically written to the saved
     * location.
     */
    @Test
    public void saveAndCheckTaskList() {
        assertTrue(taskListPanel.isListMatching(testTask));
        assertSaveResult(COMMAND_SAVE + FILE_NAME, FILE_NAME);
        assertSaveResult(COMMAND_SAVE + FILE_ALTERNATE_NAME, FILE_ALTERNATE_NAME);
        commandBox.runCommand(COMMAND_DELETE + index);
        assertTrue(taskListPanel.isListMatching(TestUtil.removeTaskFromList(testTask, index)));
        assertOpenResult(COMMAND_OPEN + FILE_NAME + FILE_XML_EXTENSION, testTask);
        assertTrue(taskListPanel.isListMatching(td.getTypicalTasks()));
    }

    /** Test invalid Command confirmation. */
    @Test
    public void invalidCommand() {
        commandBox.runCommand(SaveCommand.COMMAND_WORD + FILE_DIR);
        assertResultMessage(Messages.MESSAGE_UNKNOWN_COMMAND);
        commandBox.runCommand(OpenCommand.COMMAND_WORD + FILE_NAME);
        assertResultMessage(Messages.MESSAGE_UNKNOWN_COMMAND);
        //commandBox.runCommand(COMMAND_SAVE + EMPTY);
        //assertResultMessage(SaveCommand.MESSAGE_INVALID_PATH);
        commandBox.runCommand(COMMAND_OPEN + EMPTY);
        assertResultMessage(OpenCommand.MESSAGE_INVALID_PATH);
    }

    /** Ensure save functions properly. */
    private void assertSaveResult(String command, String filename) {
        File testfile = new File(filename + FILE_XML_EXTENSION);
        if (FileUtil.isFileExists(testfile)) {
            FileUtil.deleteFile(testfile);
        }
        commandBox.runCommand(command);
        assertTrue(FileUtil.isFileExists(testfile));
        assertResultMessage(
                String.format(SaveCommand.MESSAGE_SUCCESS, FileUtil.getPath(filename + FILE_XML_EXTENSION)));
    }

    /** Ensure open functions properly. */
    private void assertOpenResult(String command, TestTask... expectedhits) {
        commandBox.runCommand(command);
        assertTrue(taskListPanel.isListMatching(expectedhits));
    }

}
```
